<!DOCTYPE html>

<html lang="en-US">

<head>

  <meta charset="utf-8">

  <title>chemXbio</title>

  <link rel="stylesheet" type="text/css" href="mystyle.css">

  <script src = "mix.js"></script>
  <script src = "helper.js"></script>
  <script src = "Operation.js"></script>

</head>


<body>
<div id="experiment">

  <div class="leftside">

    <button onclick="showhidetoggle('operationsMenu'); createExperiment()">New experiment</button>

    <div id="operationsMenu" style="display: none">

      <table id="menu">
        <tr>
          <td><button id="addSub" onclick="showhidetoggle('substanceadd')">Add Substance</button></td>
          <td><button id="removeSub" onclick="showhidetoggle('substanceremoval')">Remove Substance</button></td>
        </tr>
      </table>

      <table>
        <tr>
          <td><button id="mixButton" onclick="showhidetoggle('mixtureform'); inputCreate()">Mix</button></td>
          <td><button id="heatButton" onclick="showhidetoggle('heat_coolform')">Heat</button></td>
          <td><button id="splitButton" onclick="">Split</button></td>
          <td><button id="outputButton" onclick="">Output</button></td>
        </tr>
      </table>

      <button id="restButton" onclick="resetExperiment()">Reset Experiment</button>
      <button id="startButton" onclick="">Start Experiment</button>
      <button id="quit" onclick="toJson(experimentHolder); hideDiv('operationsMenu');
              showDiv('experiment'); resetExperiment()">Quit Experiment</button>

      <script>

          function createExperiment() {

              if (experimentHolder.length === 0) {

                  experimentHolder.push(experimentStructure);
              }
          }

          function addSub() {
              experimentStructure.EXPERIMENT.INPUTS = substancelist;
          }

          function addMix() {

              experimentStructure.EXPERIMENT.INSTRUCTIONS = operationList;
          }

          function startExperiment () {

          }

          // window.location.reload()
      </script>

      <!-- Begin Substance Form -->
      <div id='substanceadd' style="display: none">
        <form id='subAddForm' method='post'>
          <fieldset>
          <legend>Add Substance</legend>
            <label for="substanceName">Input:</label>
            <input type='text' id='substanceName' name='' value=''>
            <br>
            <input type="button" onclick="inputSubstance(document.getElementById('substanceName').value);
                   update();" name="" value="Add Substance">
            <input type="button" onclick="addSub(); showhidetoggle('substanceadd')"
                   value="Done">
            <br>
            <br>
            <div id="substancedisplay">
              <!-- shows list of currently entered user substances -->
            </div>
          </fieldset>
        </form>
      </div>
      <!-- End Substance Form -->


      <!-- Begin Substance Removal Form -->
      <div id="substanceremoval" style="display: none">
        <form id="subRemoveForm" method="post">
          <fieldset>
          <legend>Remove Substance</legend>
            <label for="removesubstanceName">Enter Substance to Remove:</label>
            <select id="removesubstanceName">
              <script>
                removeSubstance();
              </script>
            </select>
            <br>
            <input type="button" onclick="removeSubstance(); update()" value="Remove">
            <input type="button" onclick="showhidetoggle('substanceremoval')" value="Done">
          </fieldset>
        </form>
      </div>
      <!-- End Substance Removal Form -->


      <!-- Begin Mixture Form -->
      <div id="mixtureform" style="display: none">
        <form id="mixForm" method="post">
          <fieldset>
            <legend>MIX</legend>
            <label for="mixName">Name:</label>
            <input type="text" id="mixName" name="" value="">
            <br>
            <br>
            <label for="numInputs">How many inputs for mixture?</label>
            <select id="numInputs" onchange="inputCreate()">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formInput();
              </script>
            </select>
            <br>
            <br>
            <label for="mixInput">Enter Mixtures:</label>
            <br>
            <div id="mixInput">
              <!-- container for dynamically making input fields -->
            </div>
            <label for="mixTemp">Enter Temp:</label>
            <input type="text" id="mixTemp" name="" value="">
            <select id="mixTempSign">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTemperature('mixTempSign');
              </script>
            </select>
            <br>
            <label for="mixTime">Enter Time:</label>
            <input type="text" id="mixTime" name="" value="">
            <select id="mixDuration">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTime('mixDuration');
              </script>
            </select>
            <br>
            <label for="mixOutputname">Output Name:</label>
            <input type="text" id="mixOutputName">
            <br>
            <br>
            <input type="button" onclick="createMix()" value="Add Mix">
            <input type="button" onclick="addMix(); showhidetoggle('mixtureform')" value="Done">
          </fieldset>
        </form>
      </div>
      <!-- End Mixture Form -->


      <!-- Begin Heat Form -->
      <div id="heat_coolform">
        <form id="heatForm" post="post">
          <fieldset>
            <legend>Heat</legend>
            <label for="nameHeat">Name:</label>
            <input type="text" id="nameHeat">
            <br>
            <br>
            <label for="inputHeat">Select Inputs:</label>
            <select id="inputHeat">
              <!-- ADD HEAT INPUTS FOR SELECTION HERE -->
            </select>
            <br>
            <br>
            <label for="heatTemp">Enter Temp:</label>
            <input type="text" id="heatTemp" name="" value="">
            <select id="heatTempSign">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                  formTemperature('heatTempSign');
              </script>
            </select>
            <br>
            <label for="heatTime">Enter Time:</label>
            <input type="text" id="heatTime">
            <select id="heatDuration">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                  formTime('heatDuration');
              </script>
            </select>
            <br>
            <br>
            <input type="button" onclick="" value="Add Heat">
            <input type="button" onclick="showhidetoggle('heat_coolform')" value="Done">
          </fieldset>
        </form>
      </div>
      <!-- End Heat Form -->


      <script>
      function createMix()
      {
        var opt = JSON.parse(JSON.stringify(operationStructure));

        opt.OPERATION.NAME = document.getElementById('mixName').value;
        opt.OPERATION.ID = createID();
        opt.OPERATION.CLASSIFICATION = 'MIX';

        var num = document.getElementById('numInputs').value;

        for (i = 0; i < num; i++)
        {
            var tmpName = document.getElementById("input" + i).value;
            console.log(tmpName);
            var tmpVol = document.getElementById("inputvolume" + i).value;
            console.log(tmpVol);
            var tmpUnit = document.getElementById("inputvolumeUnits" + i).value;
            console.log(tmpUnit);

            inputVariable(opt, tmpName, tmpVol, tmpUnit);
        }

        inputTemperature(opt, document.getElementById('mixTemp').value, document.getElementById('mixTempSign').value);
        inputTime(opt, document.getElementById('mixTime').value, document.getElementById('mixDuration').value);
        inputOutput(opt, 'substance', document.getElementById('mixOutputName').value);

        operationList.push(opt);

        resetForm('mixForm');
        inputCreate();

      }
      </script>

    </div>  <!-- End of operationsMenu-->

  </div> <!-- End of left side -->



  <div class="rightside">

    <pre id="whereToPrint"></pre>

  </div> <!-- End of right side -->

</div> <!-- End of experiment -->

</body>


</html>
