<!DOCTYPE html>

<html lang="en-US">

<head>

  <meta charset="utf-8">

  <title>chemXbio</title>

  <link rel="stylesheet" type="text/css" href="mystyle.css">

  <script src = "mix.js"></script>
  <script src = "helper.js"></script>
  <script src = "Operation.js"></script>

</head>


<body>
<div id="experiment">

  <div class="leftside">

    <button onclick="showhidetoggle('operationsMenu'); createExperiment()">New experiment</button>

    <div id="operationsMenu" style="display: none">

      <button id="addSub" onclick="showhidetoggle('substanceform')">Add Substance</button>
      <button id="mixButton" onclick="showhidetoggle('mixtureform'); inputCreate()">Mix</button>
      <button id="heatButton" onclick="">Heat</button>
      <button id="splitButton" onclick="">Split</button>
      <button id="outputButton" onclick="">Output</button>
      <button id="restButton" onclick="resetExperiment()">Reset Experiment</button>
      <button id="quit" onclick="toJson(experimentHolder); hideDiv('operationsMenu');
              showDiv('experiment');">Quit Experiment</button>

      <script>
          function createExperiment()
          {
              if (experimentHolder.length === 0)
              {
                  experimentHolder.push(experimentStructure);
              }
          }

          function addSub()
          {
              experimentStructure.EXPERIMENT.INPUTS.push(substancelist);
          }

          function addMix()
          {
              experimentStructure.EXPERIMENT.INSTRUCTIONS.push(operationList);
          }

        
      </script>

      <!-- Begin Substance Form -->
      <div id='substanceform' style="display: none">
        <form id='subForm' method='post'>
          <fieldset>
          <legend>Add Substance</legend>
            <label for="substanceName">Input:</label>
            <input type='text' id='substanceName' name='' value=''>
            <br>
            <input type="button" onclick="inputSubstance(document.getElementById('substanceName').value); formInput(substances.length); formRemove()"
                   name="" value="Add Substance">
            <input type="button" onclick="addSub(); showhidetoggle('substanceform')"
                   value="Done">
            <br>
            <br>
            <div id="substancedisplay">
              <script>
                  //toJson(substances);// need to list the substances being used
              </script>
            </div> <!-- end the display of currently inputted substances -->
          </fieldset>
        </form>
      </div>
      <!-- End Substance Form -->


      <!-- Begin Substance Removal Form -->
      <div id="substanceremoval">
        <form id="subRemoveForm" method="post">
          <fieldset>
          <legend>Remove Substance</legend>
            <label for="removesubstanceName">Enter Substance to Remove:</label>
            <select id="removesubstanceName">
              <script>
                removeSubstance();
              </script>
            </select>
            <br>
            <input type="button" onclick="removeSubstance()" value="Remove">
          </fieldset>
        </form>
      </div>
      <!-- End Substance Removal Form -->

      <script>

      </script>


      <!-- Begin Mixture Form -->
      <div id="mixtureform" style="display: none">
        <form id="mixForm" method="post">
          <fieldset>
            <legend>MIX</legend>
            <label for="nameMix">Name:</label>
            <input type="text" id="nameMix" name="" value="">
            <br>
            <label for="numInputs">How many inputs for mixture?</label>
            <select id="numInputs" onchange="inputCreate()">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formInput();
              </script>
            </select>
            <br>
            <br>
            <label for="inputMix">Enter Mixtures:</label>
            <br>
            <div id="inputMix">
              <!-- container for dynamically making input fields -->
            </div>
            <label for="tempMix">Enter Temp:</label>
            <input type="text" id="tempMix" name="" value="">
            <select id="tempSign">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTemperature('tempSign');
              </script>
            </select>
            <br>
            <label for="timeMix">Enter Time:</label>
            <input type="text" id="timeMix" name="" value="">
            <select id="timeDuration">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTime('timeDuration');
              </script>
            </select>
            <br>
            <input type="button" onclick="createMix()" id="" name="" value="Add Mix">
            <input type="button" onclick="addMix(); showhidetoggle('mixtureform')" value="Done">
            </fieldset>
        </form>
      </div>
      <!-- End Mixture Form -->


      <script>
      function createMix()
      {
        var opt = JSON.parse(JSON.stringify(operationStructure));

        opt.NAME = document.getElementById('nameMix').value;
        opt.ID = createID();
        opt.CLASSIFICATION = 'MIX';

        var num = substances.length;

        for (i = 0; i < num; i++)
        {
            var tmpName = document.getElementById("input" + i).value;
            console.log(tmpName);
            var tmpVol = document.getElementById("inputvolume" + i).value;
            console.log(tmpVol);
            var tmpUnit = document.getElementById("inputvolumeUnits" + i).value;
            console.log(tmpUnit);

            inputVariable(opt, tmpName, tmpVol, tmpUnit);
        }

        inputTemperature(opt, document.getElementById('tempMix').value, document.getElementById('tempSign').value);
        inputTime(opt, document.getElementById('timeMix').value, document.getElementById('timeDuration').value);

        operationList.push({OPERATION: opt});

        resetForm('mixForm');
        inputCreate();

      }
      </script>

    </div>  <!-- End of operationsMenu-->

  </div> <!-- End of left side -->



  <div class="rightside">

    <pre id="whereToPrint"></pre>

  </div> <!-- End of right side -->

</div> <!-- End of experiment -->

</body>


</html>
