<!DOCTYPE html>

<html lang="en-US">

<head>

  <meta charset="utf-8">

  <title>chemXbio</title>

  <link rel="stylesheet" type="text/css" href="mystyle.css">

  <script src = "mix.js"></script>
  <script src = "helper.js"></script>
  <script src = "Operation.js"></script>

</head>


<body>
<div id="experiment">

  <div class="leftside">

    <button onclick="showhidetoggle('operationsMenu'); createExperiment()">New experiment</button>

    <div id="operationsMenu" style="display: none">

      <button id="addSub" onclick="showhidetoggle('substanceadd')">Add Substance</button>
      <button id="removeSub" onclick="showhidetoggle('substanceremoval')">Remove Substance</button>
      <button id="mixButton" onclick="showhidetoggle('mixtureform'); inputCreate()">Mix</button>
      <button id="heatButton" onclick="">Heat</button>
      <button id="splitButton" onclick="">Split</button>
      <button id="outputButton" onclick="">Output</button>
      <button id="restButton" onclick="resetExperiment()">Reset Experiment</button>
      <button id="startButton" onclick="">Start Experiment</button>
      <button id="quit" onclick="toJson(experimentHolder); hideDiv('operationsMenu');
              showDiv('experiment'); resetExperiment()">Quit Experiment</button>
      <script>

          function createExperiment() {

              if (experimentHolder.length === 0) {

                  experimentHolder.push(experimentStructure);
              }
          }

          function addSub() {
              experimentStructure.EXPERIMENT.INPUTS = substancelist;
          }

          function addMix() {

              experimentStructure.EXPERIMENT.INSTRUCTIONS = operationList;
          }

          function startExperiment () {

          }

          // window.location.reload()
      </script>

      <!-- Begin Substance Form -->
      <div id='substanceadd' style="display: none">
        <form id='subAddForm' method='post'>
          <fieldset>
          <legend>Add Substance</legend>
            <label for="substanceName">Input:</label>
            <input type='text' id='substanceName' name='' value=''>
            <br>
            <input type="button" onclick="inputSubstance(document.getElementById('substanceName').value);
                   update();" name="" value="Add Substance">
            <input type="button" onclick="addSub(); showhidetoggle('substanceadd')"
                   value="Done">
            <br>
            <br>
            <div id="substancedisplay">
              <!-- shows list of currently entered user substances -->
            </div>
          </fieldset>
        </form>
      </div>
      <!-- End Substance Form -->


      <!-- Begin Substance Removal Form -->
      <div id="substanceremoval" style="display: none">
        <form id="subRemoveForm" method="post">
          <fieldset>
          <legend>Remove Substance</legend>
            <label for="removesubstanceName">Enter Substance to Remove:</label>
            <select id="removesubstanceName">
              <script>
                removeSubstance();
              </script>
            </select>
            <br>
            <input type="button" onclick="removeSubstance(); update()" value="Remove">
            <input type="button" onclick="showhidetoggle('substanceremoval')" value="Done">
          </fieldset>
        </form>
      </div>
      <!-- End Substance Removal Form -->


      <!-- Begin Mixture Form -->
      <div id="mixtureform" style="display: none">
        <form id="mixForm" method="post">
          <fieldset>
            <legend>MIX</legend>
            <label for="nameMix">Name:</label>
            <input type="text" id="nameMix" name="" value="">
            <br>
            <label for="numInputs">How many inputs for mixture?</label>
            <select id="numInputs" onchange="inputCreate()">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formInput();
              </script>
            </select>
            <br>
            <br>
            <label for="inputMix">Enter Mixtures:</label>
            <br>
            <div id="inputMix">
              <!-- container for dynamically making input fields -->
            </div>
            <label for="tempMix">Enter Temp:</label>
            <input type="text" id="tempMix" name="" value="">
            <select id="tempSign">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTemperature('tempSign');
              </script>
            </select>
            <br>
            <label for="timeMix">Enter Time:</label>
            <input type="text" id="timeMix" name="" value="">
            <select id="timeDuration">
              <option selected disabled hidden style='display: none' value=''></option>
              <script>
                formTime('timeDuration');
              </script>
            </select>
            <label for="mixOutput">Output:</label>
            <input type="text" id="mixOutputName">
            <select id="mixOutput" >
              <option selected disabled hidden style="display: none" value=''></option>
              <option value="variable">Variable</option>
              <option id="mixOutSensor" value="sensor">Sensor</option>
            </select>
            <br>
            <input type="button" onclick="createMix()" id="" name="" value="Add Mix">
            <input type="button" onclick="addMix(); showhidetoggle('mixtureform')" value="Done">
            </fieldset>
        </form>
      </div>
      <!-- End Mixture Form -->


      <script>
      function createMix()
      {
        var opt = JSON.parse(JSON.stringify(operationStructure));



        opt.OPERATION.NAME = document.getElementById('nameMix').value;
        opt.OPERATION.ID = createID();
        opt.OPERATION.CLASSIFICATION = 'MIX';

        var num = document.getElementById('numInputs').value;

        for (i = 0; i < num; i++)
        {
            var tmpName = document.getElementById("input" + i).value;
            console.log(tmpName);
            var tmpVol = document.getElementById("inputvolume" + i).value;
            console.log(tmpVol);
            var tmpUnit = document.getElementById("inputvolumeUnits" + i).value;
            console.log(tmpUnit);

            inputVariable(opt, tmpName, tmpVol, tmpUnit);
        }

        inputTemperature(opt, document.getElementById('tempMix').value, document.getElementById('tempSign').value);
        inputTime(opt, document.getElementById('timeMix').value, document.getElementById('timeDuration').value);
        console.log(document.getElementById('mixOutput').value);
        console.log(document.getElementById('mixOutputName').value);
        inputOutput(opt, document.getElementById('mixOutput').value, document.getElementById('mixOutputName').value);

        operationList.push(opt);

        resetForm('mixForm');
        inputCreate();

      }
      </script>

    </div>  <!-- End of operationsMenu-->

  </div> <!-- End of left side -->



  <div class="rightside">

    <pre id="whereToPrint"></pre>

  </div> <!-- End of right side -->

</div> <!-- End of experiment -->

</body>


</html>
